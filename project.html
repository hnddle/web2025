<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tasty Map - ë‚˜ë§Œì˜ ë§›ì§‘ ì§€ë„</title>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=1f30d9a9b2eca51d2ca9a70377285455&libraries=services"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #fafafa;
            color: #333;
        }

        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        header {
            background: #ff6b35;
            color: white;
            padding: 0.875rem 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .user-info {
            background: rgba(255,255,255,0.2);
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.875rem;
        }

        .main-content {
            margin-top: 56px;
            flex: 1;
            position: relative;
        }

        .floating-search {
            position: absolute;
            top: 1rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            width: 90%;
            max-width: 500px;
        }

        .search-wrapper {
            background: white;
            border-radius: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            padding: 0.5rem 1rem;
        }

        #searchInput {
            flex: 1;
            border: none;
            padding: 0.5rem;
            font-size: 1rem;
            outline: none;
        }

        .search-icon {
            color: #ff6b35;
            font-size: 1.2rem;
        }

        .filter-pills {
            display: flex;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .filter-pill {
            background: white;
            border: 1px solid #e0e0e0;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .filter-pill:hover {
            border-color: #ff6b35;
            color: #ff6b35;
        }

        .filter-pill.active {
            background: #ff6b35;
            color: white;
            border-color: #ff6b35;
        }

        .nav-tabs {
            background: white;
            box-shadow: 0 -2px 8px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-around;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 100;
        }

        .tab-btn {
            background: none;
            border: none;
            padding: 0.75rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: #999;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
        }

        .tab-btn:hover {
            color: #ff6b35;
        }

        .tab-btn.active {
            color: #ff6b35;
        }

        .tab-icon {
            font-size: 1.25rem;
        }

        #searchBtn {
            display: none;
        }

        .tab-content {
            display: none;
            height: calc(100vh - 112px);
        }

        .tab-content.active {
            display: block;
        }

        #map {
            width: 100%;
            height: 100%;
        }

        .list-container {
            height: 100%;
            overflow-y: auto;
            background: #fafafa;
        }

        .restaurant-grid {
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .restaurant-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            display: flex;
            height: 120px;
        }

        .restaurant-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }

        .restaurant-image {
            width: 120px;
            height: 120px;
            object-fit: cover;
        }

        .restaurant-info {
            padding: 1rem;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .restaurant-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
        }

        .restaurant-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.25rem;
        }

        .restaurant-rating {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: #ff6b35;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .restaurant-meta {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #666;
            font-size: 0.875rem;
        }

        .restaurant-category {
            color: #ff6b35;
            font-weight: 500;
        }

        .restaurant-address {
            color: #999;
            font-size: 0.8rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .restaurant-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .btn {
            padding: 0.4rem 0.8rem;
            border: none;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: #ff6b35;
            color: white;
        }

        .btn-primary:hover {
            background: #e55a2b;
        }

        .btn-scrap {
            background: white;
            border: 1px solid #e0e0e0;
            color: #666;
            padding: 0.3rem 0.6rem;
        }

        .btn-scrap:hover {
            border-color: #ff6b35;
            color: #ff6b35;
        }

        .btn-scrap.active {
            background: #fff5f0;
            border-color: #ff6b35;
            color: #ff6b35;
        }

        .collection-header {
            padding: 1rem;
            background: white;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .collection-header h2 {
            font-size: 1.25rem;
            color: #333;
            font-weight: 600;
        }

        #collectionCount {
            background: #ff6b35;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
        }

        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            max-height: 70vh;
            overflow-y: auto;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }

        .close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            font-size: 1.5rem;
            font-weight: 300;
            color: white;
            cursor: pointer;
            z-index: 10;
            background: rgba(0,0,0,0.5);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close:hover {
            background: rgba(0,0,0,0.7);
        }

        .modal-header {
            position: relative;
            height: 200px;
            overflow: hidden;
        }

        .modal-header img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .modal-info {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #666;
            font-size: 0.875rem;
        }

        .info-label {
            font-weight: 500;
            color: #333;
            min-width: 80px;
        }

        .map-popup {
            background: white;
            padding: 0.75rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            min-width: 200px;
        }

        .map-popup h3 {
            font-size: 1rem;
            margin-bottom: 0.25rem;
            color: #333;
        }

        .map-popup p {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .map-popup button {
            padding: 0.4rem 0.8rem;
            font-size: 0.8rem;
        }

        .kakao-map-popup {
            z-index: 50 !important;
        }
            .filter-pills {
                padding: 0.5rem;
            }
            
            .restaurant-card {
                height: 100px;
            }
            
            .restaurant-image {
                width: 100px;
                height: 100px;
            }
            
            .restaurant-info {
                padding: 0.75rem;
            }
            
            .restaurant-name {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>Tasty Map</h1>
                <div class="user-info">
                    <span>ì´ì •ë¯¼ (20102246)</span>
                </div>
            </div>
        </header>

        <main class="main-content">
            <div id="mapTab" class="tab-content active">
                <div class="floating-search">
                    <div class="search-wrapper">
                        <span class="search-icon">ğŸ”</span>
                        <input type="text" id="searchInput" placeholder="ë§›ì§‘, ì§€ì—­, ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰">
                        <button id="searchBtn">ê²€ìƒ‰</button>
                    </div>
                    <div class="filter-pills">
                        <div class="filter-pill active" data-category="">ì „ì²´</div>
                        <div class="filter-pill" data-category="korean">í•œì‹</div>
                        <div class="filter-pill" data-category="chinese">ì¤‘ì‹</div>
                        <div class="filter-pill" data-category="japanese">ì¼ì‹</div>
                        <div class="filter-pill" data-category="western">ì–‘ì‹</div>
                        <div class="filter-pill" data-category="cafe">ì¹´í˜</div>
                    </div>
                </div>
                <div id="map"></div>
            </div>

            <div id="listTab" class="tab-content">
                <div class="list-container">
                    <div class="restaurant-grid" id="restaurantGrid"></div>
                </div>
            </div>

            <div id="collectionTab" class="tab-content">
                <div class="list-container">
                    <div class="collection-header">
                        <h2>ë‚´ê°€ ìŠ¤í¬ë©í•œ ë§›ì§‘</h2>
                        <span id="collectionCount">0ê°œ</span>
                    </div>
                    <div class="restaurant-grid" id="collectionGrid"></div>
                </div>
            </div>
        </main>

        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="map">
                <span class="tab-icon">ğŸ—ºï¸</span>
                <span>ì§€ë„</span>
            </button>
            <button class="tab-btn" data-tab="list">
                <span class="tab-icon">ğŸ“‹</span>
                <span>ëª©ë¡</span>
            </button>
            <button class="tab-btn" data-tab="collection">
                <span class="tab-icon">â¤ï¸</span>
                <span>ìŠ¤í¬ë©</span>
            </button>
        </nav>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">Ã—</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
        const restaurants = [
            {
                id: 1,
                name: "ê°•ë‚¨ ê³±ì°½",
                category: "korean",
                categoryName: "í•œì‹",
                region: "gangnam",
                address: "ì„œìš¸ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123",
                lat: 37.5012,
                lng: 127.0396,
                rating: 4.5,
                image: "https://picsum.photos/400/300?random=1",
                description: "ì‹ ì„ í•œ ê³±ì°½ê³¼ ëŒ€ì°½ì„ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ê°•ë‚¨ì˜ ì¸ê¸° ë§›ì§‘ì…ë‹ˆë‹¤.",
                phone: "02-1234-5678",
                hours: "17:00 - 02:00",
                menu: ["ê³±ì°½ êµ¬ì´", "ëŒ€ì°½ êµ¬ì´", "ë§‰ì°½ êµ¬ì´"],
                price: "15,000ì› ~ 25,000ì›"
            },
            {
                id: 2,
                name: "í™ëŒ€ ë¼ë©˜ì§‘",
                category: "japanese",
                categoryName: "ì¼ì‹",
                region: "hongdae",
                address: "ì„œìš¸ ë§ˆí¬êµ¬ ì™€ìš°ì‚°ë¡œ 456",
                lat: 37.5563,
                lng: 126.9235,
                rating: 4.8,
                image: "https://picsum.photos/400/300?random=2",
                description: "ì§„í•œ ëˆì½”ì¸  ë¼ë©˜ìœ¼ë¡œ ìœ ëª…í•œ í™ëŒ€ì˜ ë¼ë©˜ ì „ë¬¸ì ì…ë‹ˆë‹¤.",
                phone: "02-2345-6789",
                hours: "11:30 - 22:00",
                menu: ["ëˆì½”ì¸  ë¼ë©˜", "ë¯¸ì†Œ ë¼ë©˜", "ì¸ ì¼€ë©˜"],
                price: "10,000ì› ~ 15,000ì›"
            },
            {
                id: 3,
                name: "ëª…ë™ íŒŒìŠ¤íƒ€",
                category: "western",
                categoryName: "ì–‘ì‹",
                region: "myeongdong",
                address: "ì„œìš¸ ì¤‘êµ¬ ëª…ë™ê¸¸ 789",
                lat: 37.5636,
                lng: 126.9869,
                rating: 4.3,
                image: "https://picsum.photos/400/300?random=3",
                description: "ìˆ˜ì œ íŒŒìŠ¤íƒ€ì™€ í”¼ìë¥¼ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ëª…ë™ì˜ ì´íƒˆë¦¬ì•ˆ ë ˆìŠ¤í† ë‘ì…ë‹ˆë‹¤.",
                phone: "02-3456-7890",
                hours: "11:00 - 22:00",
                menu: ["ê¹Œë¥´ë³´ë‚˜ë¼", "ì•Œë¦¬ì˜¤ ì˜¬ë¦¬ì˜¤", "ë§ˆë¥´ê²Œë¦¬íƒ€ í”¼ì"],
                price: "15,000ì› ~ 30,000ì›"
            },
            {
                id: 4,
                name: "ì´íƒœì› ë²„ê±°",
                category: "western",
                categoryName: "ì–‘ì‹",
                region: "itaewon",
                address: "ì„œìš¸ ìš©ì‚°êµ¬ ì´íƒœì›ë¡œ 321",
                lat: 37.5347,
                lng: 126.9945,
                rating: 4.6,
                image: "https://picsum.photos/400/300?random=4",
                description: "ìˆ˜ì œ íŒ¨í‹°ì™€ ì‹ ì„ í•œ ì¬ë£Œë¡œ ë§Œë“  í”„ë¦¬ë¯¸ì—„ ë²„ê±° ì „ë¬¸ì ì…ë‹ˆë‹¤.",
                phone: "02-4567-8901",
                hours: "11:00 - 23:00",
                menu: ["í´ë˜ì‹ ë²„ê±°", "ë² ì´ì»¨ ì¹˜ì¦ˆë²„ê±°", "ë¨¸ì‰¬ë£¸ ë²„ê±°"],
                price: "12,000ì› ~ 18,000ì›"
            },
            {
                id: 5,
                name: "ì ì‹¤ ì§œì¥ë©´",
                category: "chinese",
                categoryName: "ì¤‘ì‹",
                region: "jamsil",
                address: "ì„œìš¸ ì†¡íŒŒêµ¬ ì˜¬ë¦¼í”½ë¡œ 654",
                lat: 37.5133,
                lng: 127.1001,
                rating: 4.2,
                image: "https://picsum.photos/400/300?random=5",
                description: "ì „í†µ ë°©ì‹ìœ¼ë¡œ ë§Œë“  ìˆ˜íƒ€ ì§œì¥ë©´ì´ ì¼í’ˆì¸ ì¤‘êµ­ ìš”ë¦¬ ì „ë¬¸ì ì…ë‹ˆë‹¤.",
                phone: "02-5678-9012",
                hours: "10:30 - 21:30",
                menu: ["ì§œì¥ë©´", "ì§¬ë½•", "íƒ•ìˆ˜ìœ¡"],
                price: "8,000ì› ~ 25,000ì›"
            },
            {
                id: 6,
                name: "ê°•ë‚¨ ìŠ¤ì‹œ",
                category: "japanese",
                categoryName: "ì¼ì‹",
                region: "gangnam",
                address: "ì„œìš¸ ê°•ë‚¨êµ¬ ë´‰ì€ì‚¬ë¡œ 987",
                lat: 37.5172,
                lng: 127.0473,
                rating: 4.9,
                image: "https://picsum.photos/400/300?random=6",
                description: "ì‹ ì„ í•œ í™œì–´ì™€ ìˆ™ì„± ì°¸ì¹˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜¤ë§ˆì¹´ì„¸ ì „ë¬¸ì ì…ë‹ˆë‹¤.",
                phone: "02-6789-0123",
                hours: "12:00 - 22:00",
                menu: ["ëŸ°ì¹˜ ì˜¤ë§ˆì¹´ì„¸", "ë””ë„ˆ ì˜¤ë§ˆì¹´ì„¸", "ì‚¬ì‹œë¯¸ ì •ì‹"],
                price: "50,000ì› ~ 150,000ì›"
            },
            {
                id: 7,
                name: "í™ëŒ€ ë–¡ë³¶ì´",
                category: "korean",
                categoryName: "í•œì‹",
                region: "hongdae",
                address: "ì„œìš¸ ë§ˆí¬êµ¬ í™ìµë¡œ 111",
                lat: 37.5547,
                lng: 126.9221,
                rating: 4.4,
                image: "https://picsum.photos/400/300?random=7",
                description: "ë§¤ì½¤ë‹¬ì½¤í•œ ë–¡ë³¶ì´ì™€ ë‹¤ì–‘í•œ ë¶„ì‹ì„ ì¦ê¸¸ ìˆ˜ ìˆëŠ” í™ëŒ€ ë§›ì§‘ì…ë‹ˆë‹¤.",
                phone: "02-7890-1234",
                hours: "11:00 - 23:00",
                menu: ["ë¡œì œ ë–¡ë³¶ì´", "ì§œì¥ ë–¡ë³¶ì´", "ê¹€ë°¥"],
                price: "5,000ì› ~ 15,000ì›"
            },
            {
                id: 8,
                name: "ëª…ë™ ì¹´í˜",
                category: "cafe",
                categoryName: "ì¹´í˜",
                region: "myeongdong",
                address: "ì„œìš¸ ì¤‘êµ¬ ë‚¨ëŒ€ë¬¸ë¡œ 222",
                lat: 37.5607,
                lng: 126.9858,
                rating: 4.7,
                image: "https://picsum.photos/400/300?random=8",
                description: "ìˆ˜ì œ ë””ì €íŠ¸ì™€ ìŠ¤í˜ì…œí‹° ì»¤í”¼ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ëª…ë™ì˜ ì¹´í˜ì…ë‹ˆë‹¤.",
                phone: "02-8901-2345",
                hours: "08:00 - 22:00",
                menu: ["ì•„ë©”ë¦¬ì¹´ë…¸", "ì¹´í˜ë¼ë–¼", "í‹°ë¼ë¯¸ìˆ˜"],
                price: "5,000ì› ~ 12,000ì›"
            },
            {
                id: 9,
                name: "ì´íƒœì› íƒœêµ­ ìš”ë¦¬",
                category: "western",
                categoryName: "ì–‘ì‹",
                region: "itaewon",
                address: "ì„œìš¸ ìš©ì‚°êµ¬ ë…¹ì‚¬í‰ëŒ€ë¡œ 333",
                lat: 37.5341,
                lng: 126.9900,
                rating: 4.5,
                image: "https://picsum.photos/400/300?random=9",
                description: "ì •í†µ íƒœêµ­ ìš”ë¦¬ë¥¼ ë§›ë³¼ ìˆ˜ ìˆëŠ” ì´íƒœì›ì˜ ì¸ê¸° ë ˆìŠ¤í† ë‘ì…ë‹ˆë‹¤.",
                phone: "02-9012-3456",
                hours: "11:30 - 22:30",
                menu: ["íŒŸíƒ€ì´", "ë˜ ì–Œê¿", "ê·¸ë¦° ì»¤ë¦¬"],
                price: "12,000ì› ~ 20,000ì›"
            },
            {
                id: 10,
                name: "ì ì‹¤ ë¸ŒëŸ°ì¹˜",
                category: "cafe",
                categoryName: "ì¹´í˜",
                region: "jamsil",
                address: "ì„œìš¸ ì†¡íŒŒêµ¬ ì†¡íŒŒëŒ€ë¡œ 444",
                lat: 37.5145,
                lng: 127.1050,
                rating: 4.6,
                image: "https://picsum.photos/400/300?random=10",
                description: "ê±´ê°•í•œ ë¸ŒëŸ°ì¹˜ì™€ ì‹ ì„ í•œ ìƒëŸ¬ë“œë¥¼ ì œê³µí•˜ëŠ” ì ì‹¤ì˜ ë¸ŒëŸ°ì¹˜ ì¹´í˜ì…ë‹ˆë‹¤.",
                phone: "02-0123-4567",
                hours: "09:00 - 21:00",
                menu: ["ì—ê·¸ ë² ë„¤ë”•íŠ¸", "ì•„ë³´ì¹´ë„ í† ìŠ¤íŠ¸", "ë¦¬ì½”íƒ€ íŒ¬ì¼€ì´í¬"],
                price: "15,000ì› ~ 25,000ì›"
            },
            {
                id: 11,
                name: "ê°•ë‚¨ ì‚¼ê²¹ì‚´",
                category: "korean",
                categoryName: "í•œì‹",
                region: "gangnam",
                address: "ì„œìš¸ ê°•ë‚¨êµ¬ ê°•ë‚¨ëŒ€ë¡œ 555",
                lat: 37.4979,
                lng: 127.0276,
                rating: 4.3,
                image: "https://picsum.photos/400/300?random=11",
                description: "ì œì£¼ í‘ë¼ì§€ì™€ í•œìš°ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ê°•ë‚¨ì˜ ê³ ê¸° ì „ë¬¸ì ì…ë‹ˆë‹¤.",
                phone: "02-1357-2468",
                hours: "17:00 - 01:00",
                menu: ["ì œì£¼ í‘ë¼ì§€", "í•œìš° ë“±ì‹¬", "ëœì¥ì°Œê°œ"],
                price: "20,000ì› ~ 50,000ì›"
            },
            {
                id: 12,
                name: "í™ëŒ€ í”¼ì",
                category: "western",
                categoryName: "ì–‘ì‹",
                region: "hongdae",
                address: "ì„œìš¸ ë§ˆí¬êµ¬ ì–´ìš¸ë§ˆë‹¹ë¡œ 666",
                lat: 37.5579,
                lng: 126.9245,
                rating: 4.4,
                image: "https://picsum.photos/400/300?random=12",
                description: "í™”ë•ì—ì„œ êµ¬ìš´ ì •í†µ ë‚˜í´ë¦¬ í”¼ìë¥¼ ë§›ë³¼ ìˆ˜ ìˆëŠ” í™ëŒ€ ë§›ì§‘ì…ë‹ˆë‹¤.",
                phone: "02-2468-1357",
                hours: "11:30 - 23:00",
                menu: ["ë§ˆë¥´ê²Œë¦¬íƒ€", "ë””ì•„ë³¼ë¼", "ì½°íŠ¸ë¡œ í¬ë¥´ë§ˆì§€"],
                price: "18,000ì› ~ 30,000ì›"
            }
        ];

        let map;
        let markers = [];
        let currentRestaurants = [...restaurants];
        let scrapedRestaurants = JSON.parse(localStorage.getItem('scrapedRestaurants') || '[]');

        function initMap() {
            const mapContainer = document.getElementById('map');
            
            // ì¹´ì¹´ì˜¤ë§µ APIê°€ ë¡œë“œë˜ì§€ ì•Šì€ ê²½ìš°
            if (typeof kakao === 'undefined' || !kakao.maps) {
                mapContainer.innerHTML = `
                    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; background: #f5f5f5;">
                        <div style="text-align: center; padding: 2rem;">
                            <h3 style="color: #ff6b35; margin-bottom: 1rem;">ğŸ—ºï¸ ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h3>
                            <p style="color: #666; line-height: 1.6;">
                                ì¹´ì¹´ì˜¤ë§µ API í‚¤ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.<br><br>
                                <strong>í•´ê²° ë°©ë²•:</strong><br>
                                1. <a href="https://developers.kakao.com" target="_blank" style="color: #ff6b35;">Kakao Developers</a>ì—ì„œ JavaScript í‚¤ ë°œê¸‰<br>
                                2. ì• í”Œë¦¬ì¼€ì´ì…˜ > í”Œë«í¼ > Webì—ì„œ ì‚¬ì´íŠ¸ ë„ë©”ì¸ ì¶”ê°€<br>
                                3. HTML íŒŒì¼ì˜ YOUR_KAKAO_API_KEYë¥¼ JavaScript í‚¤ë¡œ êµì²´
                            </p>
                            <button class="btn btn-primary" onclick="location.reload()" style="margin-top: 1rem;">
                                ë‹¤ì‹œ ì‹œë„
                            </button>
                        </div>
                    </div>
                `;
                return;
            }
            
            const mapOption = {
                center: new kakao.maps.LatLng(37.5400, 127.0100),
                level: 6
            };
            
            map = new kakao.maps.Map(mapContainer, mapOption);
            
            displayMarkers(currentRestaurants);
        }

        function displayMarkers(restaurantList) {
            if (typeof kakao === 'undefined' || !kakao.maps || !map) return;
            
            clearMarkers();
            
            restaurantList.forEach(restaurant => {
                const markerPosition = new kakao.maps.LatLng(restaurant.lat, restaurant.lng);
                const marker = new kakao.maps.Marker({
                    position: markerPosition,
                    map: map
                });
                
                const content = `
                    <div class="map-popup">
                        <h3>${restaurant.name}</h3>
                        <p>${restaurant.categoryName} â€¢ â­ ${restaurant.rating}</p>
                        <button class="btn btn-primary" onclick="showRestaurantDetail(${restaurant.id})">ìƒì„¸ë³´ê¸°</button>
                    </div>
                `;
                
                const overlay = new kakao.maps.CustomOverlay({
                    content: content,
                    position: markerPosition,
                    yAnchor: 1.2
                });
                
                kakao.maps.event.addListener(marker, 'click', function() {
                    overlay.setMap(map);
                    setTimeout(() => overlay.setMap(null), 5000);
                });
                
                markers.push(marker);
            });
        }

        function clearMarkers() {
            if (!markers) return;
            markers.forEach(marker => {
                if (marker && marker.setMap) marker.setMap(null);
            });
            markers = [];
        }

        function displayRestaurantList(restaurantList) {
            const grid = document.getElementById('restaurantGrid');
            grid.innerHTML = '';
            
            restaurantList.forEach(restaurant => {
                const card = createRestaurantCard(restaurant);
                grid.appendChild(card);
            });
        }

        function displayCollection() {
            const grid = document.getElementById('collectionGrid');
            const count = document.getElementById('collectionCount');
            grid.innerHTML = '';
            
            const scrappedList = restaurants.filter(r => scrapedRestaurants.includes(r.id));
            count.textContent = `${scrappedList.length}ê°œ`;
            
            if (scrappedList.length === 0) {
                grid.innerHTML = '<p style="text-align: center; color: #999; padding: 3rem 1rem; font-size: 0.9rem;">â¤ï¸ ì•„ì§ ìŠ¤í¬ë©í•œ ë§›ì§‘ì´ ì—†ì–´ìš”<br>ë§ˆìŒì— ë“œëŠ” ë§›ì§‘ì„ ìŠ¤í¬ë©í•´ë³´ì„¸ìš”!</p>';
                return;
            }
            
            scrappedList.forEach(restaurant => {
                const card = createRestaurantCard(restaurant);
                grid.appendChild(card);
            });
        }

        function createRestaurantCard(restaurant) {
            const card = document.createElement('div');
            card.className = 'restaurant-card';
            
            const isScrapped = scrapedRestaurants.includes(restaurant.id);
            
            card.innerHTML = `
                <img src="${restaurant.image}" alt="${restaurant.name}" class="restaurant-image">
                <div class="restaurant-info">
                    <div>
                        <div class="restaurant-header">
                            <h3 class="restaurant-name">${restaurant.name}</h3>
                            <div class="restaurant-rating">â­ ${restaurant.rating}</div>
                        </div>
                        <div class="restaurant-meta">
                            <span class="restaurant-category">${restaurant.categoryName}</span>
                            <span>â€¢</span>
                            <span class="restaurant-address">${restaurant.address}</span>
                        </div>
                    </div>
                    <div class="restaurant-actions">
                        <button class="btn btn-primary" onclick="showRestaurantDetail(${restaurant.id})">ìƒì„¸ë³´ê¸°</button>
                        <button class="btn btn-scrap ${isScrapped ? 'active' : ''}" onclick="toggleScrap(${restaurant.id})">
                            ${isScrapped ? 'â¤ï¸' : 'ğŸ¤'}
                        </button>
                    </div>
                </div>
            `;
            
            return card;
        }

        function showRestaurantDetail(id) {
            const restaurant = restaurants.find(r => r.id === id);
            if (!restaurant) return;
            
            const modal = document.getElementById('modal');
            const modalBody = document.getElementById('modalBody');
            const isScrapped = scrapedRestaurants.includes(restaurant.id);
            
            modalBody.innerHTML = `
                <div class="modal-header">
                    <img src="${restaurant.image}" alt="${restaurant.name}">
                </div>
                <div class="modal-body">
                    <h2 class="modal-title">${restaurant.name}</h2>
                    <div class="modal-info">
                        <div class="info-item">
                            <span class="info-label">ì¹´í…Œê³ ë¦¬:</span>
                            <span>${restaurant.categoryName}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">í‰ì :</span>
                            <span>â­ ${restaurant.rating}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ì£¼ì†Œ:</span>
                            <span>${restaurant.address}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ì „í™”ë²ˆí˜¸:</span>
                            <span>${restaurant.phone}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ì˜ì—…ì‹œê°„:</span>
                            <span>${restaurant.hours}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ê°€ê²©ëŒ€:</span>
                            <span>${restaurant.price}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ëŒ€í‘œë©”ë‰´:</span>
                            <span>${restaurant.menu.join(', ')}</span>
                        </div>
                    </div>
                    <p style="margin-top: 1rem; color: #666; line-height: 1.6;">${restaurant.description}</p>
                    <div class="restaurant-actions" style="margin-top: 1.5rem;">
                        <button class="btn btn-scrap ${isScrapped ? 'active' : ''}" onclick="toggleScrap(${restaurant.id})">
                            ${isScrapped ? 'ìŠ¤í¬ë© ì·¨ì†Œ' : 'ìŠ¤í¬ë©í•˜ê¸°'}
                        </button>
                    </div>
                </div>
            `;
            
            modal.style.display = 'block';
        }

        function toggleScrap(id) {
            const index = scrapedRestaurants.indexOf(id);
            if (index > -1) {
                scrapedRestaurants.splice(index, 1);
            } else {
                scrapedRestaurants.push(id);
            }
            
            localStorage.setItem('scrapedRestaurants', JSON.stringify(scrapedRestaurants));
            
            if (document.querySelector('.tab-btn.active').dataset.tab === 'list') {
                displayRestaurantList(currentRestaurants);
            } else if (document.querySelector('.tab-btn.active').dataset.tab === 'collection') {
                displayCollection();
            }
            
            const modalScrapBtn = document.querySelector('.modal-body .btn-scrap');
            if (modalScrapBtn) {
                const isScrapped = scrapedRestaurants.includes(id);
                modalScrapBtn.className = `btn btn-scrap ${isScrapped ? 'active' : ''}`;
                modalScrapBtn.textContent = isScrapped ? 'â¤ï¸ ìŠ¤í¬ë© ì·¨ì†Œ' : 'ğŸ¤ ìŠ¤í¬ë©í•˜ê¸°';
            }
        }

        function searchRestaurants() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const activeCategory = document.querySelector('.filter-pill.active').dataset.category;
            
            currentRestaurants = restaurants.filter(restaurant => {
                const matchesSearch = !searchTerm || 
                    restaurant.name.toLowerCase().includes(searchTerm) ||
                    restaurant.address.toLowerCase().includes(searchTerm) ||
                    restaurant.categoryName.toLowerCase().includes(searchTerm);
                
                const matchesCategory = !activeCategory || restaurant.category === activeCategory;
                
                return matchesSearch && matchesCategory;
            });
            
            const activeTab = document.querySelector('.tab-btn.active').dataset.tab;
            if (activeTab === 'map') {
                displayMarkers(currentRestaurants);
            } else if (activeTab === 'list') {
                displayRestaurantList(currentRestaurants);
            }
        }

        // ì „ì—­ í•¨ìˆ˜ë¡œ ì„¤ì •
        window.showRestaurantDetail = showRestaurantDetail;
        window.toggleScrap = toggleScrap;
            initMap();
            displayRestaurantList(currentRestaurants);
            displayCollection();
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    const tabId = this.dataset.tab + 'Tab';
                    document.getElementById(tabId).classList.add('active');
                    
                    if (this.dataset.tab === 'collection') {
                        displayCollection();
                    }
                });
            });
            
            document.getElementById('searchInput').addEventListener('input', searchRestaurants);
            
            document.querySelectorAll('.filter-pill').forEach(pill => {
                pill.addEventListener('click', function() {
                    document.querySelectorAll('.filter-pill').forEach(p => p.classList.remove('active'));
                    this.classList.add('active');
                    searchRestaurants();
                });
            });
            
            const modal = document.getElementById('modal');
            const closeBtn = document.querySelector('.close');
            
            closeBtn.onclick = function() {
                modal.style.display = 'none';
            }
            
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            }
        });
    </script>
</body>
</html>
